# C++面向过程

## 1 C++的简介

### **定义：**

+ C++是一种，**静态类型的**，**编译式的**，**大小写敏感**的中级语言（介于高级和低级之间）。

**静态类型**：使用静态类型的编程语言是在**编译时**执行类型检查，而不是在**运行时**执行类型检查。

### **C++的三个部分：**

+ 核心语言：所有构建块（变量，数据类型，常量等等）
+ C++标准库：提供大量函数（用于操作字符串和文件）
+ 标准模板库（STL）：提供大量方法，操作数据结构

**ANSI标准：**

+ 目的：未来确保C++的平台迁移性，编写的代码在MAC，UNIX，windows不同的系统上，度能够通过编译。

## 2 C++的编译器

+ ### **GCC和gcc是不同的东西**

>  GCC:GUN Compiler Collection(GUN 编译器集合)，它可以编译C、C++、JAV、Fortran、Pascal、Object-C、Ada等语言。

+ gcc是GCC中的GUN C Compiler（C 编译器）

+ g++是GCC中的GUN C++ Compiler（C++编译器）

### **gcc和g++本质**：

gcc和g++**并不是编译器，也不是编译器的集合，它们只是一种驱动器**，根据参数中要编译的文件的类型，调用对应的GUN编译器而已，：gcc调用了C compiler，而g++调用了C++ compiler。

### **gcc编译c的步骤**

+ 调用一个预处理器   

  > .c文件变为.i文件
  >
  > 功能：宏定义指令，条件编译指令，等替换

+ 调用实际的编译器

  > .i文件变为.s文件   编译是读取源程序（字符流），对之进行词法和语法的分析，将高级语言指令转换为功能等效的**汇编代码，或者中间代码**
  >
  > 功能：词法分析，语法分析，语义分析，中间代码生成

+ 调用一个汇编程序

  > .s文件变为.o文件  汇编过程实际上指把汇编语言代码翻译成目标机器指令
  >
  > 一个目标文件有两个段：
  >
  > + 代码段：存放程序的指令
  > + 数据段：存放全局变量，或者静态数据

+ 调用一个链接器

  > .o文件变为.exe文件 
  >
  >  静态链接，将函数代码从静态链接库拷贝到可执行程序中
  >
  > 动态链接，函数代码放入动态链接库中，可执行程序记录少量信息，执行时，使用映射。

### **gcc和g++的主要区别**

+ 对于 *.c和*.cpp文件，gcc分别当做c和cpp文件编译（c和cpp的语法强度是不一样的）

+ 对于 *.c和*.cpp文件，g++则统一当做cpp文件编译

+ 使用g++编译文件时，**g++会自动链接标准库STL，而gcc不会自动链接STL**
+ 在用gcc编译c++文件时，为了能够使用STL，需要加参数 –lstdc++ ，但这并不代表 gcc –lstdc++ 和 g++等价，

### **g++和gcc的编译命令**

+ gcc

  `gcc main.cpp -lstdc++ -o main`

  -o:选项指定输出文件名     -lstdc++：指定gcc以c++的方式编译

+ g++

  + 指定输出文件 `g++ main.cpp -o main` 输出文件为main
  + 不指定输出文件`g++ main.cpp ` 输出文件默认为a.out

## 3 C++的基本语法

**C++标识符：**用于标识变量，函数，类，模块

+ 规则：只能由：字母，数字，下划线组成，并且开头不能是数字。不能以关键字为标识符。**大小写敏感**

**注释：**C++编译器或忽略注释内容

+ 单行注释**//** 
+ 多行注释/*** ... \*/**

## 4 C++的数据类型

**注意：**

+ 对于**long类型和指针类型**，两者的字节数不一样。
+ float 四个字节，double 8个字节

| 数据类型  | 32位  | 64位  | 范围                         |
| --------- | ----- | ----- | ---------------------------- |
| bool      | 1     | 1     | 0-1                          |
| char      | 1     | 1     | 0-255                        |
| short int | 2     | 2     | –32,768~32,767               |
| int       | 4     | 4     | -2,147,483,648~2,147,483,647 |
| long      | **4** | **8** | –2,147,483,648~2,147,483,647 |
| long long | 8     | 8     | -9,223,372,036,854,775,808   |
| 指针      | **4** | **8** |                              |
| float     | 4     | 4     |                              |
| double    | 8     | 8     |                              |

![变量类型大小](D:\all_document\document\document\note\c++\CPP_train_code\C++整合笔记\graph\变量类型大小.png)

**整数表示：**

+ 十进制：正常的整数，
+ 八进制：使用0开头的数字：011表示9
+ 十六进制：使用0x或者0X开头的数字：0x11表示17

+ 无符号类型：使用u、U后缀表示数字是无符号类型
+ 长整形：使用l、L后缀表示数字是长整形

**浮点数表示：**

浮点常量由整数部分、小数点、小数部分和指数部分组成。您可以使用小数形式或者指数形式来表示浮点常量。

+ 小数形式：必须包含整数部分、小数部分。3.14   5.0   
+ 指数形式：当使用指数形式表示时， 必须包含小数点、指数   314e-2

## 5 变量

### 5.1 C++的变量声明和定义

变量声明：（告诉编译器有这个东西）变量声明向编译器提供变量的名称和类型。在编译期间可以在不知道变量的具体细节的情况下继续编译。

变量定义：（分配存储空间）在程序连接时，需要给出变量的完整定义。

**特点：**

+ C++规定：在C++程序中，变量声明可以出现多次，但是变量定义只能出现一次

### 5.2 C++ 中的左值（Lvalues）和右值（Rvalues）

**左值：**指向**内存位置的表达式**被称为左值（lvalue）表达式。**左值可以出现在赋值号的左边或右边。**

**右值：**指的是存储在内存中**某些地址的数值**。**右值是不能对其进行赋值的表达式，只能出现在左边，不能出现在右边。**

## 6 常量

**常量：**常量是固定值，在程序执行期间不会改变，且常量定义后将不会改变

C++中使用两种方式定义常量：

+ 使用#define预处理器定义常量
+ 使用const关键字定义常量

## 7 C++的存储类

存储类：存储类定义C++程序中**变量\函数**的范围**（可见性）和生命周期**

从 C++ 17 开始，auto 关键字不再是 C++ 存储类说明符，且 register 关键字被弃用。

### 1 auto存储类

注意：C++11中删除这一用法

**两种情况：**

+ 声明变量时根据初始化表达式自动推断该变量的类型

  > auto f=3.14;      //double

+ 声明函数时函数返回值的占位符。

  > auto s("hello");  //const char*

### 2 register 存储类

**register** 存储类用于定义存储在寄存器中而不是 RAM 中的局部变量。这意味着变量的最大尺寸等于寄存器的大小（通常是一个词），且不能对它应用一元的 '&' 运算符（因为它没有内存位置）。

### 3 static存储类

**修饰局部变量：**在程序的生命周期内保持局部变量的存在，不需要在每次它进入和离开作用域时进行创建和销毁

**修饰全局变量：**static 修饰符也可以应用于全局变量。当 static 修饰全局变量时，会使变量的作用域限制在声明它的文件内。

### 4 extern 存储类

定义：

+ **extern** 存储类用于提供一个全局变量的引用，全局变量对所有的程序文件都是可见的。

作用：

+ *extern* 是用来在另一个文件中声明一个全局变量或函数。

用途：

+ extern 修饰符通常用于当有两个或多个文件共享相同的全局变量或函数的时候

```c++
//main。cpp
#include <iostream>
int count ;
extern void write_extern();
int main()
{
   count = 5;
   write_extern();
}

//support.cpp
#include <iostream>
extern int count; 
void write_extern(void)
{
   std::cout << "Count is " << count << std::endl;
}
```

## 8 C++的运算符优先级和结合性

C语言的优先级表格：

http://c.biancheng.net/view/161.html

**大致规律：**

+ 大致规律：算术运算符 > "左移，右移">>关系运算符 >位运算符>> 逻辑运算符 > 条件运算符>>赋值运算符。逻辑运算符中“逻辑非 !”除外。
+ （）的优先级最高，逗号优先级最低
+ 只有三种运算符的结合方向是从右到左：
  + 赋值运算符
  + 单目运算符
  + 三目运算符
  + 右结合：同一优先级相当于在右侧表达式加（）

+ C语言只有一个三目运算符，条件运算符

**常见的错觉：**

| 优先级             | 表达式    | 实际结果    |
| ------------------ | --------- | ----------- |
| .的优先级高于`*`   | *p.f      | *(p.f)      |
| []的优先级高于'\*' | int *ap[] | int *(ap[]) |
| 函数 () 高于 *     | int *fp() | int *(fp()) |

记忆格式："张飞算计魏延，关羽，或者调戏妇女

| 词语 | 解释                                                         |
| ---- | ------------------------------------------------------------ |
| 张飞 | 逻辑！按位~，运算符和sizeof()，单目运算符优先级最高，结合方向从右向左，sizeof() |
| 算计 | 算数运算符                                                   |
| 魏延 | 移位运算符                                                   |
| 关羽 | 关系运算符，==和！=小于普通关系运算符                        |
| 或者 | 按位，与，异或，或                                           |
|      | 逻辑与，逻辑或                                               |
| 调戏 | 条件运算符                                                   |
| 妇女 | 赋值运算符                                                   |

